%\documentclass[12pt,a4paper,oneside]{scrbook} % la clase book del Koma-script bundle
\documentclass[a4paper,10pt,oneside,headinclude,titlepage]{article} % la clase book del Koma-script bundle
%\linespread{1.25}
\usepackage{setspace}
%\usepackage{tikz}
%\usetikzlibrary{fit,shapes}
\usepackage[spanish]{babel}
%\usepackage{verbatim} %para el entorno comment
%\usepackage{moreverb} %para los ejemplos de lilypond, aporta verbatimtabinput
%\usepackage{alltt} %para los ejemplos de lilypond, aporta verbatiminput
%\usepackage{sverb} %para los ejemplos de lilypond, aporta verbinput
%\usepackage{fancyvrb} %para los ejemplos de lilypond, aporta VerbatimInput
\pagestyle{empty}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc} %posiblemente sirva para eliminar el problema del enguionado de palabras acentuadas. Lo quitamos provisionalmente para evitar un error
\usepackage{textcomp} % recomendación de Javier Bezos para completar la fuente

\usepackage[margin=2cm]{geometry}
\usepackage{graphicx}
%\usepackage{url}

\usepackage[utopia]{mathdesign}
%\usepackage{mathptmx} %mejor que Times    % alternativa a Charter


%\typearea[0mm]{13}% same as class options above
%\usepackage{newcent}
%\addtokomafont{part}{\mdseries} %encabezamientos sin negrita
%\addtokomafont{partnumber}{\mdseries} %encabezamientos sin negrita
%\addtokomafont{chapter}{\mdseries} %encabezamientos sin negrita
%\setkomafont{disposition}{\normalcolor\bfseries} %no sans serif
%\setkomafont{disposition}{\normalcolor\mdseries} %no negrita

\parskip=6pt\clubpenalty=10000\widowpenalty=10000

\newcommand{\preLilyPondExample}{\vspace{-10pt}}

\newcommand{\lpversion}{2.13.4}
\newcommand{\defsep}{\textbf{$\|$}}
\newcommand{\software}{\emph{software}}
\newcommand{\negspace}{\vspace{-10pt}}  %{\vspace{-20pt}}
\newcommand{\seppar}{
\bigskip
%\vspace{6pt}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\setcounter{section}{12} %para 13 variables


\section{Variables. Reutilización del código.}


\subsection{Modelo}

Para este ejercicio de procedente de la Corrente de la partita para
flauta, BWV 1030, de Bach, debe escribir la música dentro de una
variable, y emplear la variable más tarde dentro de un contexto de
pentagrama:

\bigskip

\begin[staffsize=17.5]{lilypond}
corrente =  {  
\time 3/4
    \partial 8
    e''8 |
    a'16 ( b'16 c''16 d''16 e''8 fis''16  gis''16) a''8 b''8 |
    c'''8 a'8 g'4 b''4 |
f'8 a''16 gis''16 a''8 e'8 d'8 b''8 
gis''4.\trill b''16 a''16 gis''16 fis''16 e''16 d''16 |}

\new Staff { \corrente }


\end{lilypond}


\subsection{Definición y utilización de variables}

Dando nombre a una expresión, podemos reutilizar la expresión
escribiendo su nombre precedido de una barra invertida.

\begin[verbatim,staffsize=17.5]{lilypond}
musica = \relative c' { c1 d e }

<<
  \new Staff { \musica }
  \new Staff { \musica }
>>
\end{lilypond}

Estas expresiones con un nombre se llaman \textbf{variables}.  Los
nombres de variable no pueden contener números, aunque sí vocales
acentuadas y 'ñ'.  El problema es que se deben utilizar con el mismo
nombre exacto que se les dio al crearlas, por lo que se recomienda
utilizar nombres fáciles de escribir sin errores.

También se pueden almacenar en variables expresiones de letra:

\begin[verbatim,staffsize=17.5]{lilypond}
musicaUno = \relative c' { f1 e d c }
musicaDos = \relative c { \clef bass d1 g g, c }
letra = \lyricmode { La, la, la, la. }

<<
  \new Staff { \musicaUno } \addlyrics { \letra }
  \new Staff { \musicaDos } \addlyrics { \letra }
>>
\end{lilypond}

\end{document}

